**父类指针指向子类对象，解释一下底层是怎么实现的**



在 C++ 中，父类指针指向子类对象的底层原理与虚函数实现的原理类似，都是通过虚函数表来实现的。



每个包含虚函数的类都有一个虚函数表，它是一个指向虚函数地址的指针数组。当一个对象被创建时，会在其内存空间中分配一块空间来存储虚函数表，并且在对象的内存布局中，将虚函数表指针作为一个成员变量存储。当对象的虚函数被调用时，程序会根据虚函数表中存储的虚函数地址来调用正确的函数实现。（重写与否)



当子类继承父类时，子类会继承父类的虚函数表，同时也可能会新增自己的虚函数，这些新增的虚函数会在子类的虚函数表中添加新的虚函数地址。当父类指针指向子类对象时，程序会根据对象的虚函数表来调用相应的虚函数实现，无论这些虚函数是从父类继承而来还是在子类中新增的。



因此，父类指针指向子类对象的底层原理就是通过指针所指向的对象的虚函数表来实现**动态绑定**，使得程序在运行时能够根据对象的实际类型来调用相应的虚函数。这也是 C++ 中实现多态的基础。