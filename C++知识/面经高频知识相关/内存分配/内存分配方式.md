## C++的5种内存分配方式 ：

**堆、栈、自由存储区、全局/静态存储区和常量存储区**

 

### **栈**

栈是一个预定义大小的内存区域，通常为2兆字节，存储的时候**栈指针不断向后移动**，可以看见存储的数据在一定程度上（Debug模式会存在数据之间的保护数据）是**连续**的，所以**分配内存会比较快** ，在程序运行到**离开**函数（**变量的作用域**）之后，**栈中对应的内存就会清空**

 

### **堆**

堆也是一个预定义了默认值的区域,主要使用**new(开始申请堆内存)**，这实际上**调用了**malloc**函数**，它会去浏览程**序运行就创建好的空闲列表**，找到**空闲的区域**，动态**分配**对应的指针（内存地址），所以会**慢一些**

 

### **自由存储区**

就是那些由 malloc 等分配的内存块，他和堆是十分相似的，不过它是用 **free** 来结束自己的生命的。

 

### **全局/静态存储区**

全局变量和静态变量被分配到**同一块内存**中（在以前的 C 语言中，全局变量又分为初始化的和未初始化的初始化的全局变量和静态变量在一块区域，未初始化 的全局变量与静态变量在相邻的另一块区域，同时未被初始化的对象存储区可以通过 void* 来访问和操纵，程序结束后由系统自行释放，在 C++ 里 面**没有**这个区分了，他们共同占用同一块内存区。）

 

### **常量存储区**

这是一块比较特殊的存储区，他们里面存放的是常量，不允许修改